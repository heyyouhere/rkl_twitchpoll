<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="style.css" media="screen">
</head>


<body style="background-color: #171717;">
    <!-- <img src="back.png"> -->
    <!-- <div style="background-image: url(back.png); background-repeat: no-repeat; background-size: 100%"> -->
    <div class="parent">
        <img src="back.png" style="display:inline; position:absolute; z-index: -1;">
        <!-- <table> -->
        <img class='team_logo' src="logos/Sun.png">
        <!-- <div class="percents" id="score1" style="margin-left: 30px;"></div> -->
        <input id='votes' max="130" min="-30" type="range" value="50" title="123">
        <!-- <div class="percents" id="score2" style="margin-left: -100px;"></div> -->
        <img class='team_logo' src="logos/arcred.png">
        <!-- </table> -->
    </div>
    <!-- </img> -->

    <!-- </div> -->

    <!-- <div class='tx' id='info'>
        <span style="margin-left: 45px;" id="points_left">
            10k
        </span>
        <span style="margin-left: 820px;" id='points_right'>
            10k
        </span>

    </div> -->

</body>

<script>
    let range = document.getElementById('votes')
    let s1 = document.getElementById('score1')
    let s2 = document.getElementById('score2')

    s1.textContent = Number(range.value) + '%'
    s2.textContent = 100 - range.value + '%'


    range.oninput = function() {
        if ((Number(range.value) > 0) && (Number(range.value) < 100)) {
            s1.textContent = Number(range.value) + '%'
            s2.textContent = 100 - range.value + '%'
        } else {
            if (Number(range.value) < 0) {
                range.value = 1
            }
            if (Number(range.value) > 100) {
                range.value = 100
            }
        }
    }

    function animateBar(l, r) {
        old_l = point_left.textContent
        old_r = points_right.textContent

    }

    function updateValues(l, r) {

        point_left.textContent = l + 'k'
        points_right.textContent = r + 'k'
        range.value = Math.round(l / (l + r) * 100)
            // console.log(Math.round(l/(l + r)))
        s1.textContent = Number(range.value) + '%'
        s2.textContent = 100 - range.value + '%'

        setTimeout(() => {

        }, "100")


    }


    let point_left = document.getElementById('points_left')
    let points_right = document.getElementById('points_right')

    function myLoop() {
        setTimeout(() => {
            l = Math.round(Math.random() * 100)
            r = Math.round(Math.random() * 100)
            updateValues(l, r)
            myLoop()
        }, "2000")
    }

    myLoop()

    // let url = 'http://space.brothersproduction.ru:502'


    // var xmlHttp = new XMLHttpRequest();
    // xmlHttp.open("GET", url, true); // false for synchronous request
    // xmlHttp.setRequestHeader('Access-Control-Allow-Origin','*')
    // xmlHttp.send();
    // console.log(xmlHttp.response)
</script>

</html>